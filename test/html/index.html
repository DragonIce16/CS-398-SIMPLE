<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Boop - Welcome</title>
    <!-- Load CSS files in the correct order -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="/css/game.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js"></script>
</head>
<body onload="brython()">
    <div class="welcome-container">
        <h1>Boop!</h1>
        <p class="subtitle">A strategic game of cats and kittens</p>

        <div class="game-preview">
            <div class="preview-piece">
                <img src="/images/kitten_a.png" alt="Kitten">
                <p>Kittens</p>
            </div>
            <div class="preview-piece">
                <img src="/images/cat_a.png" alt="Cat">
                <p>Cats</p>
            </div>
        </div>

        <div class="player-setup">
            <div class="player-select">
                <label>Player 0:
                    <select id="player-0-type">
                        <option value="human">Human</option>
                        <option value="ai">AI</option>
                    </select>
                </label>
            </div>
            <div class="player-select">
                <label>Player 1:
                    <select id="player-1-type">
                        <option value="human">Human</option>
                        <option value="ai">AI</option>
                    </select>
                </label>
            </div>
        </div>

        <div class="action-buttons">
            <button onclick="startGame()" class="action-button play-button">Start Game</button>
            <button id="rules-btn" class="rules-btn">Game Rules</button>
        </div>

    </div>

    <!-- Add the Rules Modal -->
    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <span id="close-rules" class="close-btn">&times;</span>
            <div class="rules-section">
                <h2>Boop - Game Rules</h2>
                
                <div class="rules-nav">
                    <ul>
                        <li><a href="#overview">Overview</a></li>
                        <li><a href="#pieces">Pieces</a></li>
                        <li><a href="#basic-rules">Basic Rules</a></li>
                        <li><a href="#special-rules">Special Rules</a></li>
                        <li><a href="#winning">Winning</a></li>
                    </ul>
                </div>

                <section id="overview">
                    <h3>Overview</h3>
                    <p>Boop is a strategic board game where players compete to align three cats while managing their kittens and cats on a 6x6 board.</p>
                </section>

                <section id="pieces">
                    <h3>Pieces</h3>
                    <div class="piece-info">
                        <div class="piece-type">
                            <img src="/images/kitten_a.png" alt="Kitten" class="piece-image">
                            <h4>Kittens</h4>
                            <ul>
                                <li>Basic game pieces</li>
                                <li>Each player starts with 8 kittens</li>
                                <li>Can boop other kittens</li>
                                <li>Cannot boop cats</li>
                            </ul>
                        </div>
                        <div class="piece-type">
                            <img src="/images/cat_a.png" alt="Cat" class="piece-image">
                            <h4>Cats</h4>
                            <ul>
                                <li>Upgraded pieces</li>
                                <li>Created when 3 kittens align</li>
                                <li>Each cat in that line turns into a cat</li>
                                <li>Can boop both kittens and cats</li>
                                <li>Three aligned cats wins the game</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="basic-rules">
                    <h3>Basic Rules</h3>
                    <ul>
                        <li>Players take turns placing pieces on the board</li>
                        <li>When a piece is placed next to other pieces, it "boops" them</li>
                        <li>Booped pieces move one space away from the booping piece</li>
                        <li>If a piece is booped off the board, it returns to the player's stock</li>
                        <li>Players must place all their kittens before using cats</li>
                    </ul>
                </section>

                <section id="special-rules">
                    <h3>Special Rules</h3>
                    <div class="special-rules-content">
                        <h4>Kitten Promotion</h4>
                        <p>When three kittens are aligned (horizontally, vertically, or diagonally), they are promoted to cats and return to the player's stock.</p>
                        
                        <h4>Booping Mechanics</h4>
                        <ul>
                            <li>Kittens can only boop other kittens</li>
                            <li>Cats can boop both kittens and other cats</li>
                            <li>Multiple pieces can be booped in a single move</li>
                            <li>Pieces are booped in a straight line away from the placed piece</li>
                            <li>Booping happens in all eight directions (orthogonal and diagonal)</li>
                        </ul>
                    </div>
                </section>

                <section id="winning">
                    <h3>Winning the Game</h3>
                    <p>The game ends when a player successfully aligns three cats in a row (horizontally, vertically, or diagonally). This player is declared the winner!</p>
                </section>
            </div>
        </div>
    </div>

    <script type="text/python">
    # Set up the Python path and import mechanism
    import sys
    from browser import window

    # Add current directory to Python path
    sys.path.insert(0, '/python')

    # Import our module
    from menu import RulesModal

    # Initialize the modal
    modal = RulesModal()
    </script>

    <script>
        function startGame() {
            const p0Type = document.getElementById('player-0-type').value;
            const p1Type = document.getElementById('player-1-type').value;
            
            // Store player types in localStorage
            localStorage.setItem('player0Type', p0Type);
            localStorage.setItem('player1Type', p1Type);
            
            // Navigate to game page
            window.location.href = '/game.html';
        }
    </script>
</body>
</html>
